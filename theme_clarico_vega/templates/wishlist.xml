<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--=====================  Wishlist Page ======================================-->
    <template id="product_wishlist_ept" inherit_id="website_sale_wishlist.product_wishlist">
        <xpath expr="//section[hasclass('wishlist-section')]" position="attributes">
            <attribute name="class">wishlist-section mt16</attribute>
        </xpath>
        <xpath expr="//h3" position="replace">
        </xpath>
        <xpath expr="//div[hasclass('checkbox')]" position="replace">
            <div class="checkbox">
                <label class='text-muted'>
                    <input type="checkbox" id='b2b_wish' value="1" class="mr8"/>
                    <span>Add product to my cart but keep it in my wishlist</span>
                </label>
            </div>
        </xpath>
        <xpath expr="//table[@id='o_comparelist_table']" position="replace">
            <!-- <table
                    class="table table-bordered table-striped table-hover text-center table-comparator t_wish_table"
                    id="o_comparelist_table">
                <body>
                    <t t-foreach="wishes" t-as="wish">
                        <tr t-att-data-wish-id='wish.id' t-att-data-product-id='wish.product_id.id'
                            class="te_fav_product_main align-top">
                            <td class='te_w_img align-top'>
                                <a t-att-href="'/shop/product/%s' % slug(wish.product_id.product_tmpl_id)">
                                    <img t-attf-src="/web/image/product.product/#{wish.product_id.id}/image_128"
                                         class="img img-fluid" style="margin:auto;" alt="Product image"/>
                                </a>
                            </td>
                            <td class="te_w_detail align-top text-left">
                                <div t-attf-class="te_wish_name mb8 #{'te_2_line' if (website.number_of_product_line == '2') else 'te_3_line' if (website.number_of_product_line == '3') else ''}">
                                    <a t-att-href="'/shop/product/%s' % slug(wish.product_id.product_tmpl_id)">
                                        <t t-esc="wish.product_id.display_name"/>
                                    </a>
                                </div>
                                <div class="te_wish_price mb8">
                                    <t t-set="combination_info"
                                       t-value="wish.product_id._get_combination_info_variant()"/>
                                    <t t-esc="combination_info['price']"
                                       t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                </div>
                                <div class='te_wish_btn'>
                                    <input name="product_id" t-att-value="wish.product_id.id"
                                           type="hidden"/>
                                    <button type="button" role="button"
                                            class="btn btn-link o_wish_add mb4">
                                        <i class="fa fa-shopping-cart mr4" />Add
                                        <span class='d-none d-md-inline'>to Cart</span>
                                    </button>
                                    <button type="button" class="btn btn-link o_wish_rm no-decoration text-danger">
                                        <i class='fa fa-trash-o mr4' />
                                        Remove
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </t>
                </body>
            </table> -->

            <table class="table table-striped table-hover text-center table-comparator t_wish_table" id="o_comparelist_table">
                <tbody>
                    <t t-foreach="wishes" t-as="wish">
                      
                        <tr t-att-data-wish-id="wish.id" t-att-data-product-id="wish.product_id.id" class="p-0 te_fav_product_main" style="width:20% !important;padding: 0px !important;margin: 0% !important;">
                            <form action="/shop/cart/update" method="post">
                            <td class="p-0 align-top">
                                <div class="p-0 card-body p-1 oe_product_image">
                                    <a t-att-href="product_href" class="d-block h-100" itemprop="url">
                                        <span class="new_span d-flex h-100 justify-content-center align-items-center">
                                            <img t-attf-data-src="/web/image/product.template/#{wish.product_id.product_tmpl_id.id}/#{'image_1024' if product_image_big else 'image_256'}" t-attf-src="/web/image/website/#{website.id}/lazy_load_image" class="img img-fluid lazyload" alt="Product image" style="height: 240px !important;"/>
                                        </span>
                                    </a>
                                </div>
                            </td>
                            <td class="te_w_detail align-top text-left" style="width: 100% !important;">
                                <div t-attf-class="te_wish_name mb8 #{'te_2_line' if (website.number_of_product_line == '2') else 'te_3_line' if (website.number_of_product_line == '3') else ''}" style="height: 25px !important;">
                                    <a t-att-href="'/shop/product/%s' % slug(wish.product_id.product_tmpl_id)">
                                        <t t-esc="wish.product_id.display_name"/>
                                    </a>
                                </div>
                            </td>
                            <td class="te_w_detail align-top text-left" style="width: 100% !important;">
                                <div class="row">
                                    <div class="col-md-4 product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">
                                        <del t-attf-class="text-danger mr-2 d-none" style="white-space: nowrap;" t-esc="wish.product_id.list_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                        <span class="font_price_currency" t-if="wish.product_id.list_price" t-esc="wish.product_id.list_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" style="font-size: 20px !important;"/>
                                        <span itemprop="price" style="display:none;font-size:2rem !important;" t-esc="wish.product_id.price"/>
                                        <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name"/>
                                    </div>
                                    <div class="col-md-8 css_quantity input-group" contenteditable="false">
                                        <div class="input-group-prepend">
                                            <a t-attf-href="#" class="btn btn-secondary js_add_cart_json_indaws_remove" aria-label="Remove one" title="Remove one" style="font-size: 0.5rem !important;">
                                                <i class="fa fa-minus"/>
                                            </a>
                                            <span id="sh_descrement_qty_test" t-esc="wish.product_id.sh_increment_qty" style="display:none;"/>
                                        </div>
                                        <input type="text" class="form-control quantity" data-min="1" name="add_qty" t-att-value="wish.product_id.sh_increment_qty" t-att-data-setqty="wish.product_id.sh_increment_qty" style="height: auto !important;max-width: 38px !important;"/>
                                        <div class="input-group-append">
                                            <a t-attf-href="#" class="btn btn-secondary float_left js_add_cart_json_indaws" aria-label="Add one" title="Add one" style="font-size: 0.5rem !important;">
                                                <i class="fa fa-plus"/>
                                            </a>
                                            <span id="sh_increment_qty_test" t-esc="wish.product_id.sh_increment_qty" style="display:none;"/>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td class="">
                                <div class="o_wsale_product_btn">
                                    <t t-set="product_variant_id" t-value="wish.product_id.product_tmpl_id._get_first_possible_variant_id()"/>
                                    <input name="product_id" t-att-value="product_variant_id" type="hidden"/>
                                    <t t-if="product_variant_id">
                                        <a href="#" role="button" class="btn btn-secondary a-submit not_product_page new_add_to_cart o_wish_add" aria-label="Shopping cart" title="Shopping cart" t-att-product-id="product_variant_id" style="transform: unset;background: #ffffff;color: #000000;border-width: 1px;border-color: #cccccc;border-style: solid;border-radius: 50%;width: 44px;height: 44px;line-height: 44px;padding: 0;">
                                            <span class="fa fa-shopping-cart"></span>
                                        </a>
                                    </t>
                                    <!--<button type="button" role="button" class="btn btn-secondary o_add_wishlist" title="Add to Wishlist" data-action="o_wishlist" t-att-data-product-template-id="wish.product_id.product_tmpl_id.id" t-att-data-product-product-id="product_variant_id">-->
                                    <!--    <span class="fa fa-heart" role="img" aria-label="Add to wishlist"/>-->
                                    <!--</button>-->
                                </div>
                            </td>
                            <td class="te_w_detail align-top text-left" style="width: 100% !important;">
                                <div>
                                    <div>
                                        <div class="mb-n2 mt-1" style="display: inline-block;width: 100%;">
                                            <p class="disponibles" style="width: 49%;float: left;">Disponibles</p>
                                            <p align="right" class="botellas_palet" id="botellas_palet" style="width: 50%;float: left;">
                                                <t t-esc="wish.product_id.uom_id.sudo().name"/>
                                            </p>
                                        </div>
                                        <t t-set="count" t-value="1"/>
                                        <t t-set="count_en" t-value="1"/>
                                        <t t-foreach="list(set(wish.product_id.sudo().stock_available_website.split('\n')))" t-as="val_vart">
                                            <div class="mb-n2" style="display: inline-block;width: 100%;" t-if="'En Stock' in val_vart">
                                                <t t-if="count_en == 1">
                                                    <p style="width: 49%;float: left;">En Stock</p>
                                                    <t t-set="en_stock" t-value="val_vart.split('En Stock')[0]"/>
                                                    <p align="right" id="botellas_palet" style="width: 50%;float: left;">
                                                        <t t-esc="en_stock.split('.')[0]"/>
                                                    </p>
                                                </t>
                                                <t t-set="count_en" t-value="count_en+1"/>
                                            </div>
                                        </t>
                                        <t t-if="count_en == 1">
                                            <div class="mb-n2" style="display: inline-block;width: 100%;">
                                                <p style="width: 49%;float: left;height: 27px;"/>
                                                <p align="right" id="botellas_palet" style="width: 50%;float: left;height: 27px;">
                                                    <t/>
                                                </p>
                                                <t t-set="count_en" t-value="count_en+1"/>
                                            </div>
                                        </t>
                                        <t t-foreach="list(wish.product_id.sudo().stock_available_website.split('\n'))" t-as="val_vart">
                                            <t t-if="count &lt;= 1">
                                                <div class="mb-n2" style="display: inline-block;width: 100%;" t-if="' Disponible:' in val_vart">
                                                    <t t-set="en_stock_date" t-value="val_vart.split(wish.product_id.uom_id.name + ' Disponible:')[0]"/>
                                                    <t t-set="en_date" t-value="val_vart.split(wish.product_id.uom_id.name + ' Disponible:')[-1]"/>
                                                    <p style="width: 49%;float: left;">
                                                        <t t-esc="en_date"/>
                                                    </p>
                                                    <p align="right" id="botellas_palet" style="width: 50%;float: left;">
                                                        <t t-esc="en_stock_date.split('.')[0]"/>
                                                    </p>
                                                    <t t-set="count" t-value="count+1"/>
                                                </div>
                                            </t>
                                        </t>
                                        <t t-if="count == 1">
                                            <div class="mb-n2" style="display: inline-block;width: 100%;">
                                                <p style="width: 49%;float: left;height: 27px;"/>
                                                <p align="right" id="botellas_palet" style="width: 50%;float: left;height: 27px;">
                                                    <t/>
                                                </p>
                                                <t t-set="count" t-value="count+1"/>
                                            </div>
                                        </t>
                                    </div>
                                    <span>Botellas/palet :</span>
                                    <span id="botellas_palet" t-esc="wish.product_id.botellas_palet"/>
                                </div>
                            </td>
                            </form>  
                        </tr>
                                        
                    </t>
                </tbody>
            </table>
        </xpath>
        <!--		<xpath expr="//div[hasclass('container')]" position="after">-->
        <!--	    <t t-call="theme_clarico_vega.recently_viewed_ept">-->
        <!--					<t t-set="recent_data" t-value="website.get_recently_viewed_items()"/>-->
        <!--				</t>-->
        <!--	    </xpath>-->
    </template>
    <template id="product_add_to_wishlist_ept" name='Add to wishlist in product page'
              inherit_id="website_sale_wishlist.product_add_to_wishlist">
        <xpath expr="//button[hasclass('o_add_wishlist_dyn')]" position="replace">
            <button t-if="product_variant and uid and uid &gt; 0" type="button" role="button" class="btn btn-link mt16 o_add_wishlist_dyn te_theme_button"
                    t-att-disabled='in_wish or None' t-att-data-product-template-id="product.id"
                    t-att-data-product-product-id="product_variant.id" data-action="o_wishlist">
                <span class="fa fa-heart" role="img" aria-label="Add to wishlist" />
            </button>
        </xpath>
    </template>
</odoo>